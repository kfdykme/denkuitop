<!DOCTYPE html>
<html style="height: 100%;">

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

	<script src="denklib/react.development.js" crossorigin="anonymous"></script>
	<script src="denklib/react-dom.development.js"></script>

	<script src="denklib/babel.min.js" crossorigin="anonymous"></script>
	<script src="denklib/fluentui-react.min.js" crossorigin="anonymous"></script>

	<!-- Fonts to support Material Design -->
	<link rel="stylesheet" href="material-fonts.css" />
	<!-- Icons to support Material Design -->
	<link rel="stylesheet" href="material-icons.css" />
	<link rel="stylesheet/less" type="text/css" href="denklib/lowbee.markdown.less" />
	<!-- <link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/icon?family=Material+Icons"
/> -->
	<script src="highlight.min.js"></script>
	<script src="material-ui.min.js"></script>
	<script src="less.min.js"></script>
	<script>hljs.highlightAll(); window.hljs = hljs</script>

</head>

<body style="height: 100%;">
	<div id="editor_container_holder" style="width: 100%; height: 100%;">
	</div>

	<script src="./app.bundle.js"></script>
	<script type="text/babel">

		// const {
		// 	Switch,
		// 	Checkbox,
		// 	FormControlLabel
		// } = MaterialUI;
		const { Checkbox, Stack, ActionButton, TextField,SearchBox } = FluentUIReact;

		console.info('kf react ui', Checkbox, Stack)

		window.reactDom = {}
		window.getReactDom = (el) => {

			let root = window.reactDom[el]
			if (!root) {
				root = ReactDOM.createRoot(el);
				window.reactDom[el]
			}
			return root
		}
		window.reactRenderSwitch = (el, checked, handleChange, label) => {
			let root = window.getReactDom(el)

			if (typeof label === 'object') {
				label = label.value
				label = decodeURIComponent(label)
				console.info('reactRenderSwitch', label)
				if (checked) {
					root.render(
						<Checkbox className="list-item-checkbox list-item-checkbox-checked" label={label} defaultChecked onChange={handleChange} />
					);
				} else {
					root.render(
						<Checkbox className="list-item-checkbox" label={label} onChange={handleChange} />
					);
				}
			}
		}

		window.reactRenderButton = (el, onClick, iconName) => {
			let root = window.getReactDom(el)

			root.render(
				<IconButton iconProps={{
					iconName: iconName
				}} title="Emoji" ariaLabel="Emoji" />
			)
		}
		window.reactRenderAddBar = (el, onClick, iconName) => {
			let root = window.getReactDom(el)
			let value = ''
			const onChange = (ev, newText) => {
				value = ev.target.value
			};
			const addBarKeydown = (e) => {
				if (e.keyCode === 13) {
					onAdd();
				}
			}
			const onAdd =  () => {
				if (value !== '') {
					onClick(value, el.attributes.line.value);
				}
			};
			root.render(
				<div className="list-item-add-bar-container">
					<div className="list-item-add-icon">
						<div onClick={onAdd}></div>
					</div>
					<input className="list-item-add-bar-input" placeholder="添加一项" onKeyDown={(e)=> {
						addBarKeydown(e)
					}} onChange={onChange}/>
				</div>
				// <TextField
				// 	suffix=""
				// 	onChange={onChange}
				// 	onRenderSuffix={() => 
				// 		{
				// 			if (value === '') {

				// 				return null
				// 			} else {

				// 				return <ActionButton iconProps={{
				// 					iconName: iconName
				// 				}} title={iconName} ariaLabel={iconName} onClick={() => {
				// 					onClick(value, el.attributes.line.value)
				// 				}} />
				// 			}
				// 		}
				// 	}
				// />
			)
		}
	</script>
</body>
<script>
	/**
	 * 
	 */


	let isDarkMode = /isDarkMode=(.*?)&/.exec(location.href)
	if (isDarkMode) {
		isDarkMode = isDarkMode[1] === 'true'
		if (isDarkMode) {
			document.body.style.backgroundColor = '#333333'//';''#fefefe', 
		} else {

		}
	}
</script>

</html>